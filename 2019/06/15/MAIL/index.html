

<body>


<div class="body-outer">
  <div class="body-inner">
    
<link rel="stylesheet" href="/css/white.css">

<article class="post-inner">
  <div class="post-content-outer">
    <div class="post-intro">
      <div class="post-title animate__animated  animate__fadeInUp">RELEASE! MAIL-Multiple AP Indoor Localization project</div>
      <div class="meta-intro animate__animated  animate__fadeInUp">Jun 15 2019</div>
      
    </div>
    <div class="post-content-inner">
      <div class="post-content-inner-space">

      </div>
      <div class="post-content-main animate__animated  animate__fadeInUp">
        <!-- top型目录 -->
        
        <h1 id="RELEASE-MAIL-Multiple-AP-Indoor-Localization-project"><a href="#RELEASE-MAIL-Multiple-AP-Indoor-Localization-project" class="headerlink" title="RELEASE! MAIL-Multiple AP Indoor Localization project"></a>RELEASE! MAIL-Multiple AP Indoor Localization project</h1><div align="right"><br>frostwing98(Yuqing Yang)<br><br>COSEC, Nanjing University<br></div>

<h2 id="I-Introduction"><a href="#I-Introduction" class="headerlink" title="I. Introduction"></a>I. Introduction</h2><p>As the widespread deployment of various access points(hereinafter AP), more and more people begin to enjoy the convenient life of surfing wherever they are. The APs are set in homes, offices, coffee shops, shopping malls, and a large number of other public or private scenes. </p>
<p>However, this led us to a question: are these APs safe ?</p>
<p>The answer is for sure: APs are not always official, and some of them are rather BAD. Due to the fact that mobile phones usually re-connect to the APs which thay used to connect merely by the AP name and the signal strength, attackers usually utilize such feature to set up a fake AP(herein after rogue AP), with the same name, same MAC etc. Such rogue APs have stronger signal levels and are able to ‘kick out’ the official APs, to lure the victim’s phones to initialize the reconnection process according to the name and strength, i.e., to connect to the attacker’s rogue AP. </p>
<p>Then the attacker’s rogue AP(could be a mobile hotspot, PC or even a real router) act as a middle man between the victim and the real AP. By launching a man-in-the-middle attack(henceforth mitm attack), capturing the packets sent from victims or the official AP, the attackers can easily eavesdrop the credential information from the victims, such as passwords.</p>
<hr>
<p>Prior to implementing the project, I made a fake Nanjing University WLAN authentication System.</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/MAIL/MAIL-fake.png" alt="A fake website example" title="">
                </div>
                <div class="image-caption">A fake website example</div>
            </figure>
<p>And the original one:</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/MAIL/MAIL-real.png" alt="The original website" title="">
                </div>
                <div class="image-caption">The original website</div>
            </figure>
<hr>
<h2 id="II-Related-works"><a href="#II-Related-works" class="headerlink" title="II. Related works"></a>II. Related works</h2><p>To tackle such a problem, researchers have developed various approaches.</p>
<h3 id="Radiometric-signatures-2008"><a href="#Radiometric-signatures-2008" class="headerlink" title="Radiometric signatures(2008)"></a>Radiometric signatures(2008)</h3><p>Vladmir Brik et. al., [1]utilized radiometric signatures to identify the subtle differences between two different APs but with same names. Usually a router’s radiometric signatures, exempli gratia, strengths, although vary but tiny, stay stable during long term runs. However such fluctuation in radiometric signature between devices, even same types of same devices, are rather different.</p>
<h4 id="Timestamp-based-2008-mobicom"><a href="#Timestamp-based-2008-mobicom" class="headerlink" title="Timestamp based(2008,mobicom)"></a>Timestamp based(2008,mobicom)</h4><p>Suman Jana et al., [2]proposed a new timestamp-based way. Rather than TCP/IP timestamp, their approach measures TSF(Time Synchronization Function) timestamp, which is generated by router itself, with a high granularity  upto 1ms, needless of considering delays and hard to manipulate,  to measure the arrival of packet. They developed a Linear Programming Method(LPM) to avoid delay, and a Least Square Fitting(LSF) algorithm to estimate them. The ‘jump’ of arrival time indicates that there is a hidden shadow router that may be eavesdropping.</p>
<h3 id="RTT-based-2009-infocom"><a href="#RTT-based-2009-infocom" class="headerlink" title="RTT-based(2009,infocom)"></a>RTT-based(2009,infocom)</h3><p>Hao Han et al., [3] take RTT time of DNS lookup non-recursive query into consideration. Their research are based on these sound assumptions:</p>
<ul>
<li>Most local networks has a local DNS server.</li>
<li>A station can always send a dns-lookup request.</li>
<li>DNS request cannot be blocked by network<br>providers.</li>
<li>DNS response varies for different queries.</li>
</ul>
<p>Since the user-generated DNS queries are unpredictable, it is impossible for rogue AP to keep up a huge database of DNS addresses of massive entries, even if the attacker has taken dns query into consideration when setting up rogue AP. Henceforth the Ap is forced to forward the query to another dns server, and there is a time delay.</p>
<h3 id="III-Baseline-analogy-phone-as-a-radar"><a href="#III-Baseline-analogy-phone-as-a-radar" class="headerlink" title="III. Baseline analogy: phone as a radar"></a>III. Baseline analogy: phone as a radar</h3><p>The researches on rogue AP detection has been through for over ten years. However the story is not over. Let’s take this step forward.</p>
<p>If we have already suspecting a presence of rogue AP in the adjacency, what should we do?</p>
<p>The answer is simple: let’s locate it.</p>
<p>In 2011, Zengbin Zhang et al.[4] proposed an idea of merely using off-the-shelf smartphone, and without special equipments, to locate on which direction is the connected AP placed.</p>
<p>The principle is simple. When the user stands in front of the wireless antenna of the smartphone, the emissions of phone may be blocked. Hence the signal strength received from the AP decreases.<br>In such case, the user merely needs to turn around 360 degree like a radar, and signal from all blocking stances is recorded. The degree at which the signal decreses most dramatically becomes the direction of AP.</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/MAIL/antenna.png" alt="Antenna working process" title="">
                </div>
                <div class="image-caption">Antenna working process</div>
            </figure>
<h2 id="IV-Our-method-phone-as-a-Geiger-counter"><a href="#IV-Our-method-phone-as-a-Geiger-counter" class="headerlink" title="IV. Our method: phone as a Geiger counter"></a>IV. Our method: phone as a Geiger counter</h2><p>The inspiration of my method, however, comes from two interesting stories.</p>
<h3 id="The-Chernobyl-Disaster"><a href="#The-Chernobyl-Disaster" class="headerlink" title="The Chernobyl Disaster"></a>The Chernobyl Disaster</h3><p>The explosion of Chernobyl is a disaster, and even until today, those who enters Chernobyl should be equipped with a Geiger counter. When holding the geiger counter, it shows the current radiation, when the radiation rises, it indicates that we are walking towards a center of concerntrated radiating materials.<br>What about we apply such scheme to localizing APs?</p>
<h4 id="Checking-in-in-enterprises"><a href="#Checking-in-in-enterprises" class="headerlink" title="Checking-in in enterprises"></a>Checking-in in enterprises</h4><p>Some companies now adopt checking in via phone. When checking-in, the environmental signature, e.g., AP names and strength around, GPS localization informations, will be take into account to verify that you are IN the company, rather than FAKING TO BE in the company. This process is also related to indoor-localizing people using multiple routers. In a paper in 2016 from MSR-India, a trangular localization algorithm can be adopted using multiple APs to localize user.</p>
<p>Okay, so what about walking around the room, sampling and analyzing the signals, then PINPOINT the AP?<br>This is the method. The MAIL project.</p>
<h2 id="V-Project-Design"><a href="#V-Project-Design" class="headerlink" title="V. Project Design"></a>V. Project Design</h2><p>The original project is a SAIL project, single Ap indoor localization. I want to test whether it is possible detecting a given AP.</p>
<h3 id="Sensing-Wifi"><a href="#Sensing-Wifi" class="headerlink" title="Sensing Wifi"></a>Sensing Wifi</h3><ul>
<li><p>Conditional wifi sensor</p>
<p>The original design takes wifi information once upon receiving it, creating a lot of system overeads. This is bad because the app easily stops working. Hence in the final version, the sensing stage works with a interval of 4 seconds, or when the user manually force the process.</p>
</li>
</ul>
<h3 id="Sensing-movement"><a href="#Sensing-movement" class="headerlink" title="Sensing movement"></a>Sensing movement</h3><ul>
<li><p>Manual step</p>
<p>Originally I used accelerator to sense steps, and Magnetic field sensor to sense orient. However the accelerator sucks(:P) hence in the final version, the step is performed manually. User clicks ‘record’ when the orientation is adjusted to a correct condition, then the virtual step appears on screen.</p>
</li>
<li><p>Sensor Passivation</p>
<p>Originally the sensor was too accurate and sensitive. A factor of 2-5 degree is introduced. Without a change in 2-5 degrees, the direction will not be changed.</p>
</li>
</ul>
<h4 id="Data-analysis"><a href="#Data-analysis" class="headerlink" title="Data analysis"></a>Data analysis</h4><ul>
<li><p>Smoothing</p>
<p>The idea comes from the convolution neural network. A matrix is adopted to calculate means of each point and their adjacent point. The purpose is to minimize the influence of noises, or sudden fluctuations of signal strength.</p>
<p><img src="/images/MAIL/mean.png" alt=""></p>
</li>
<li><p>Regression</p>
<p>According to the scene  in which the user is required to go straight or turn without going around, the data should be subject to a cubic polynomial pattern. Hence a cubic polynomial regression is performed.</p>
<p><img src="/images/MAIL/cubicreg.png" alt=""></p>
</li>
<li><p>Pinpointing</p>
<p>To pinpoint, the SAIL first calculates the point with maximal strength, then a floating window of +/- 2.5 strength is applied. Points within this window are in the predicted range. A circle enclosing all these points is then drawn. The AP is pinpointed.</p>
</li>
</ul>
<h2 id="VI-Something-more"><a href="#VI-Something-more" class="headerlink" title="VI. Something more"></a>VI. Something more</h2><p>During the experiment, I found that the system is even able to process multiple APs. By adding them all into a Map in each step, it is capable of pinpoint multiple APs.</p>
<p>Therefore the project is upgraded into MAIL.</p>
<p>Moreover, the system has the potential of not merely pinpointing APs, but also distinguish device type, and even applicable of pinpointing non-APs, i.e. clients.</p>
<p>The future PC version of implementing above features is in progress.</p>
<h2 id="VII-Evaluations"><a href="#VII-Evaluations" class="headerlink" title="VII. Evaluations"></a>VII. Evaluations</h2><p>In the experiments both in dormitory and classroom, the granularity of localization can be within 1 meter, which is quite good.</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/MAIL/aha.png" alt="Experimantal result" title="">
                </div>
                <div class="image-caption">Experimantal result</div>
            </figure>
<p><em>(step length is around 50 cm, time between each step is less than 0.5s)</em></p>
<p>Compared with <em>I am the antenna</em>, our method does not require standing and rotating, which attracts the sight of strangers, causing alert to attackers, and we are capable of pinpointing rather than merely telling the direction.</p>
<p>Our method is stealthy, even able to locate when putting the phone in pocket, and capable of locating multiple APs.</p>
<h2 id="VIII-Resources"><a href="#VIII-Resources" class="headerlink" title="VIII Resources"></a>VIII Resources</h2><p>The code is available on Github:</p>
<p><a href="https://github.com/frostwing98/MAIL-IndoorAPLocalization" target="_blank" rel="noopener">https://github.com/frostwing98/MAIL-IndoorAPLocalization</a></p>
<h2 id="IX-Acknowledgement"><a href="#IX-Acknowledgement" class="headerlink" title="IX Acknowledgement"></a>IX Acknowledgement</h2><p>Many thanks to Associate Prof. Jingyu Hua, who gave me plenty guidances and suggestions in this project.</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p>[1] [Vladimir Brik et al., 2008]Wireless Device Identification with Radiometric Signatures</p>
<p>[2] [Suman Jana et al., 2008]On Fast and Accurate Detection of Unauthorized Wireless Access<br>Points Using Clock Skews</p>
<p>[3] [Hao Han et al., 2009]A Measurement Based Rogue AP Detection Scheme</p>
<p>[4] [Zengbin Zhang et al., 2011]I am the antenna: accurate outdoor AP location using smartphones</p>

        <!-- 分类文章 -->
        
          <div class="post-categoris-bottom">
            <div class="post-categoris-name">Research</div>
            <ul>
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
            
            
            
              
                <li class="me base">
                  <a  href="/2019/06/15/MAIL/" class="post-categoris-bottom-link">
                  RELEASE! MAIL-Multiple AP Indoor Localization project
                </a>
                </li>
              
              
            
            
            
              
                <li class="base">
                  <a  href="/2019/10/10/How-to-read-paper/" class="post-categoris-bottom-link">
                  How to read a computer science paper
                </a>
                </li>
              
              
            
            
            
              
                <li class="base">
                  <a  href="/2019/10/25/How-and-How-Not-to-Write-a-Good-Systems-Paper/" class="post-categoris-bottom-link">
                  How (and How Not) to Write a Good Systems Paper
                </a>
                </li>
              
              
            
            
            
              
            
            
            
            
            
            
            
              
                <li class="base">
                  <a  href="/2020/09/16/Lessons-learned-on-doing-research/" class="post-categoris-bottom-link">
                  Lessons Learned on Doing Research
                </a>
                </li>
              
              
            
            
            
              
            
            
            
            
            
            
            </ul>

          </div>

        
      </div>
      <div class="post-content-inner-space">
        
          <div class="space-toc-main animate__animated  animate__fadeInUp">
            <ol class="space-toc"><li class="space-toc-item space-toc-level-2"><a class="space-toc-link" href="#I-Introduction"><span class="space-toc-text">I. Introduction</span></a></li><li class="space-toc-item space-toc-level-2"><a class="space-toc-link" href="#II-Related-works"><span class="space-toc-text">II. Related works</span></a></li><li class="space-toc-item space-toc-level-2"><a class="space-toc-link" href="#IV-Our-method-phone-as-a-Geiger-counter"><span class="space-toc-text">IV. Our method: phone as a Geiger counter</span></a></li><li class="space-toc-item space-toc-level-2"><a class="space-toc-link" href="#V-Project-Design"><span class="space-toc-text">V. Project Design</span></a></li><li class="space-toc-item space-toc-level-2"><a class="space-toc-link" href="#VI-Something-more"><span class="space-toc-text">VI. Something more</span></a></li><li class="space-toc-item space-toc-level-2"><a class="space-toc-link" href="#VII-Evaluations"><span class="space-toc-text">VII. Evaluations</span></a></li><li class="space-toc-item space-toc-level-2"><a class="space-toc-link" href="#VIII-Resources"><span class="space-toc-text">VIII Resources</span></a></li><li class="space-toc-item space-toc-level-2"><a class="space-toc-link" href="#IX-Acknowledgement"><span class="space-toc-text">IX Acknowledgement</span></a></li><li class="space-toc-item space-toc-level-2"><a class="space-toc-link" href="#References"><span class="space-toc-text">References</span></a></li></ol>
           </div>
        
      </div>
   </div>
    <!-- 评论 -->
    
  </div>
</article>

  </div>
</div>





</body>
</html>
